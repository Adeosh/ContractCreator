<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:vm="using:ContractCreator.UI.ViewModels.Products"
			 xmlns:dto="using:ContractCreator.Shared.DTOs"
			 x:Class="ContractCreator.UI.Views.Products.ProductListView"
			 x:DataType="vm:ProductListViewModel"
			 x:Name="Root">

	<Grid RowDefinitions="Auto, *">

		<Grid Grid.Row="0" ColumnDefinitions="*, Auto" Margin="0,0,0,20">
			<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="20" VerticalAlignment="Center">
				<TextBlock Text="{Binding PageTitle}" FontSize="24" FontWeight="SemiBold" VerticalAlignment="Center"/>
			</StackPanel>

			<Button Grid.Column="1" Command="{Binding CreateCommand}" Classes="accent" Padding="15,8" CornerRadius="6">
				<StackPanel Orientation="Horizontal" Spacing="8">
					<TextBlock Text="+" FontWeight="Bold"/>
					<TextBlock Text="{Binding AddButtonText}"/>
				</StackPanel>
			</Button>
		</Grid>

		<DataGrid Grid.Row="1"
				  ItemsSource="{Binding Items}"
				  SelectedItem="{Binding SelectedProduct}"
				  AutoGenerateColumns="False"
				  IsReadOnly="True"
				  GridLinesVisibility="Horizontal"
				  Background="Transparent"
				  BorderThickness="1"
				  BorderBrush="#E0E0E0">

			<DataGrid.Columns>
				<DataGridTextColumn Header="Наименование" Binding="{Binding Name}" Width="2*" FontWeight="Medium"/>
				<DataGridTextColumn Header="Описание" Binding="{Binding Description}" Width="3*" />
				<DataGridTextColumn Header="Ед. изм." Binding="{Binding UnitOfMeasure}" Width="100" />

				<DataGridTextColumn Header="Цена" Binding="{Binding Price, StringFormat={}{0:N2}}" Width="120" />
				<DataGridTemplateColumn Header="Действия" Width="Auto">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate DataType="dto:GoodsAndServiceDto">
							<StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center">

								<Button Command="{ReflectionBinding #Root.DataContext.EditCommand}"
										CommandParameter="{Binding}"
										ToolTip.Tip="Редактировать"
										Background="Transparent"
										Padding="5">
									<TextBlock Text="✏️" Foreground="Orange"/>
								</Button>

								<Button Command="{ReflectionBinding #Root.DataContext.DeleteCommand}"
										CommandParameter="{Binding}"
										ToolTip.Tip="Удалить"
										Background="Transparent"
										Padding="5">
									<TextBlock Text="❌" Foreground="Red"/>
								</Button>

							</StackPanel>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
			</DataGrid.Columns>
		</DataGrid>

		<TextBlock Grid.Row="1"
				   Text="Список пуст."
				   IsVisible="{Binding !Items.Count}"
				   HorizontalAlignment="Center"
				   VerticalAlignment="Center"
				   Foreground="Gray"/>

	</Grid>
</UserControl>