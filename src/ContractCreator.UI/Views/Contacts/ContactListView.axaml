<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:ContractCreator.UI.ViewModels.Contacts"
			 xmlns:dto="using:ContractCreator.Shared.DTOs"
			 mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
			 x:Class="ContractCreator.UI.Views.Contacts.ContactListView"
			 x:DataType="vm:ContactListViewModel"
			 x:Name="Root">

	<Grid RowDefinitions="Auto, *">

		<Grid Grid.Row="0" ColumnDefinitions="*, Auto" Margin="0,0,0,20">
			<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="20" VerticalAlignment="Center">
				<TextBlock Text="Контакты" FontSize="24" FontWeight="SemiBold" VerticalAlignment="Center"/>

				<ComboBox ItemsSource="{Binding FilterCounterparties}"
						  SelectedItem="{Binding SelectedFilterCounterparty}"
						  Width="250"
						  VerticalAlignment="Center">
					<ComboBox.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding ShortName}"/>
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>
			</StackPanel>

			<Button Grid.Column="1" Command="{Binding CreateCommand}" Classes="accent" Padding="15,8" CornerRadius="6">
				<StackPanel Orientation="Horizontal" Spacing="8">
					<TextBlock Text="+" FontWeight="Bold"/>
					<TextBlock Text="Добавить контакт"/>
				</StackPanel>
			</Button>
		</Grid>

		<DataGrid Grid.Row="1"
				  ItemsSource="{Binding Items}"
				  SelectedItem="{Binding SelectedContact}"
				  AutoGenerateColumns="False"
				  IsReadOnly="True"
				  GridLinesVisibility="Horizontal"
				  Background="Transparent"
				  BorderThickness="1"
				  BorderBrush="#E0E0E0">

			<DataGrid.Columns>
				<DataGridTextColumn Header="Фамилия" Binding="{Binding LastName}" Width="*" />
				<DataGridTextColumn Header="Имя" Binding="{Binding FirstName}" Width="*" />
				<DataGridTextColumn Header="Отчество" Binding="{Binding MiddleName}" Width="*" />
				<DataGridTextColumn Header="Должность" Binding="{Binding Position}" Width="1.5*" FontWeight="Medium"/>
				<DataGridTextColumn Header="Телефон" Binding="{Binding Phone}" Width="Auto" />

				<DataGridTemplateColumn Header="Действия" Width="Auto">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate DataType="dto:WorkerDto">
							<StackPanel Orientation="Horizontal" Spacing="5" HorizontalAlignment="Center">

								<Button Command="{ReflectionBinding #Root.DataContext.EditCommand}"
										CommandParameter="{Binding}"
										ToolTip.Tip="Редактировать"
										Background="Transparent"
										Padding="5">
									<TextBlock Text="✏️" Foreground="Orange"/>
								</Button>

								<Button Command="{ReflectionBinding #Root.DataContext.DeleteCommand}"
										CommandParameter="{Binding}"
										ToolTip.Tip="Удалить"
										Background="Transparent"
										Padding="5">
									<TextBlock Text="❌" Foreground="Red"/>
								</Button>

							</StackPanel>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>

			</DataGrid.Columns>
		</DataGrid>

		<TextBlock Grid.Row="1"
				   Text="Список контактов пуст. Нажмите 'Добавить'."
				   IsVisible="{Binding !Items.Count}"
				   HorizontalAlignment="Center"
				   VerticalAlignment="Center"
				   Foreground="Gray"/>

	</Grid>

</UserControl>
