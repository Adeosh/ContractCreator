<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:ContractCreator.UI.ViewModels.Contracts"
             x:Class="ContractCreator.UI.Views.Contracts.ContractDocumentsView"
             x:DataType="vm:ContractDocumentsViewModel">

    <Grid RowDefinitions="Auto, Auto, *">
        
        <Border Grid.Row="0" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" Padding="15">
            <StackPanel Orientation="Horizontal" Spacing="15">
                <Button Command="{Binding CancelCommand}" Content="ðŸ ”" Classes="windowBtn"/>
                <TextBlock Text="Ð Ð°Ð±Ð¾Ñ‡ÐµÐµ Ð¼ÐµÑÑ‚Ð¾ Ð¿Ð¾ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ñƒ" FontSize="20" FontWeight="Bold" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="1" Background="{DynamicResource CardBrush}" CornerRadius="8" Padding="15" Margin="10">
            <Grid ColumnDefinitions="*, *, *, *">
                <StackPanel Grid.Column="0" Spacing="5">
                    <TextBlock Text="ÐÐ¾Ð¼ÐµÑ€ Ð¸ Ð”Ð°Ñ‚Ð°:" Foreground="Gray" FontSize="12"/>
                    <TextBlock FontWeight="SemiBold" FontSize="14">
                        <TextBlock.Text>
                            <MultiBinding StringFormat="â„– {0} Ð¾Ñ‚ {1:dd.MM.yyyy}">
                                <Binding Path="ContractInfo.ContractNumber"/>
                                <Binding Path="ContractInfo.IssueDate"/>
                            </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>
                </StackPanel>

                <StackPanel Grid.Column="1" Spacing="5">
                    <TextBlock Text="ÐšÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚:" Foreground="Gray" FontSize="12"/>
                    <TextBlock Text="{Binding ContractInfo.CounterpartyName}" FontWeight="SemiBold" FontSize="14" TextWrapping="Wrap"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Spacing="5">
                    <TextBlock Text="ÐŸÑ€ÐµÐ´Ð¼ÐµÑ‚ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð°:" Foreground="Gray" FontSize="12"/>
                    <TextBlock Text="{Binding ContractInfo.ContractSubject}" FontSize="13" TextWrapping="Wrap" MaxHeight="40"/>
                </StackPanel>

                <StackPanel Grid.Column="3" Spacing="5">
                    <TextBlock Text="Ð¡ÑƒÐ¼Ð¼Ð° ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°:" Foreground="Gray" FontSize="12"/>
                    <TextBlock Text="{Binding ContractInfo.ContractPrice, StringFormat='{}{0:N2} Ñ€ÑƒÐ±.'}" 
                               FontWeight="Bold" FontSize="16" Foreground="#2E7D32"/>
                </StackPanel>
            </Grid>
        </Border>

        <TabControl Grid.Row="2" Margin="10,0,10,10">
            
            <TabItem Header="Ð¡Ñ‡ÐµÑ‚Ð°">
                <Grid RowDefinitions="Auto, *">
                    <Button Grid.Row="0" Command="{Binding CreateInvoiceCommand}" Classes="accent" Margin="0,10,0,15" Padding="15,8" HorizontalAlignment="Left">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="+" FontWeight="Bold"/>
                            <TextBlock Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÑ‡ÐµÑ‚"/>
                        </StackPanel>
                    </Button>

                    <DataGrid Grid.Row="1" ItemsSource="{Binding Invoices}" AutoGenerateColumns="False" IsReadOnly="True" GridLinesVisibility="Horizontal">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="â„– Ð¡Ñ‡ÐµÑ‚Ð°" Binding="{Binding InvoiceNumber}" Width="150"/>
                            <DataGridTextColumn Header="Ð”Ð°Ñ‚Ð°" Binding="{Binding InvoiceDate, StringFormat=d}" Width="120"/>
                            <DataGridTextColumn Header="Ð¡ÑƒÐ¼Ð¼Ð°" Binding="{Binding AggregateAmount, StringFormat='{}{0:N2}'}" Width="150" FontWeight="Bold"/>
                            <DataGridTemplateColumn Header="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center">
                                            <Button Content="âœï¸" Background="Transparent" Padding="5"/>
                                            <Button Content="âŒ" Foreground="Red" Background="Transparent" Padding="5"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="ÐÐºÑ‚Ñ‹">
                <Grid RowDefinitions="Auto, *">
                    <Button Grid.Row="0" Content="+ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð°ÐºÑ‚" Classes="accent" Margin="0,10,0,15" Padding="15,8" HorizontalAlignment="Left"/>
                    <DataGrid Grid.Row="1" ItemsSource="{Binding Acts}" AutoGenerateColumns="False" IsReadOnly="True" GridLinesVisibility="Horizontal">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="â„– ÐÐºÑ‚Ð°" Binding="{Binding ActNumber}" Width="150"/>
                            <DataGridTextColumn Header="Ð”Ð°Ñ‚Ð°" Binding="{Binding ActDate, StringFormat=d}" Width="120"/>
                            <DataGridTextColumn Header="Ð¡ÑƒÐ¼Ð¼Ð°" Binding="{Binding AggregateAmount, StringFormat='{}{0:N2}'}" Width="150" FontWeight="Bold"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="ÐÐ°ÐºÐ»Ð°Ð´Ð½Ñ‹Ðµ">
                <Grid RowDefinitions="Auto, *">
                    <Button Grid.Row="0" Content="+ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð°ÐºÐ»Ð°Ð´Ð½ÑƒÑŽ" Classes="accent" Margin="0,10,0,15" Padding="15,8" HorizontalAlignment="Left"/>
                    <DataGrid Grid.Row="1" ItemsSource="{Binding Waybills}" AutoGenerateColumns="False" IsReadOnly="True" GridLinesVisibility="Horizontal">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="â„– Ð£ÐŸÐ”" Binding="{Binding WaybillNumber}" Width="150"/>
                            <DataGridTextColumn Header="Ð”Ð°Ñ‚Ð°" Binding="{Binding WaybillDate, StringFormat=d}" Width="120"/>
                            <DataGridTextColumn Header="Ð¡ÑƒÐ¼Ð¼Ð°" Binding="{Binding AggregateAmount, StringFormat='{}{0:N2}'}" Width="150" FontWeight="Bold"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

        </TabControl>
    </Grid>
</UserControl>
